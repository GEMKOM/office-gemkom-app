<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gantt Chart - View Selection Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="gantt.css">
    <style>
        body {
            background-color: #f8f9fa;
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
        }
        .test-section h3 {
            color: #8b0000;
            margin-bottom: 15px;
        }
        .gantt-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">Gantt Chart - View Selection Test</h1>
        
        <div class="test-section">
            <h3>1. All Views Available (Default)</h3>
            <div class="gantt-container" id="gantt-all-views"></div>
        </div>

        <div class="test-section">
            <h3>2. Only Day and Week Views</h3>
            <div class="gantt-container" id="gantt-day-week"></div>
        </div>

        <div class="test-section">
            <h3>3. Only Month and Year Views</h3>
            <div class="gantt-container" id="gantt-month-year"></div>
        </div>

        <div class="test-section">
            <h3>4. Only Day View</h3>
            <div class="gantt-container" id="gantt-day-only"></div>
        </div>
    </div>

    <script type="module">
        import { GanttChart } from './gantt.js';

        // Sample tasks for testing
        const sampleTasks = [
            {
                id: 1,
                title: 'Project Planning',
                ti_number: 'TI-001',
                planned_start_ms: Date.now(),
                planned_end_ms: Date.now() + (2 * 24 * 60 * 60 * 1000), // 2 days
                plan_order: 1,
                plan_locked: false,
                category: 'work'
            },
            {
                id: 2,
                title: 'Development Phase',
                ti_number: 'TI-002',
                planned_start_ms: Date.now() + (1 * 24 * 60 * 60 * 1000), // 1 day from now
                planned_end_ms: Date.now() + (5 * 24 * 60 * 60 * 1000), // 5 days from now
                plan_order: 2,
                plan_locked: true,
                category: 'work'
            },
            {
                id: 3,
                title: 'Testing Phase',
                ti_number: 'TI-003',
                planned_start_ms: Date.now() + (4 * 24 * 60 * 60 * 1000), // 4 days from now
                planned_end_ms: Date.now() + (7 * 24 * 60 * 60 * 1000), // 7 days from now
                plan_order: 3,
                plan_locked: false,
                category: 'test'
            }
        ];

        // Test 1: All views available (default)
        const ganttAllViews = new GanttChart('gantt-all-views', {
            title: 'All Views Available',
            defaultPeriod: 'month',
            availableViews: ['day', 'week', 'month', 'year']
        });
        ganttAllViews.setTasks(sampleTasks);

        // Test 2: Only day and week views
        const ganttDayWeek = new GanttChart('gantt-day-week', {
            title: 'Day & Week Views Only',
            defaultPeriod: 'day',
            availableViews: ['day', 'week']
        });
        ganttDayWeek.setTasks(sampleTasks);

        // Test 3: Only month and year views
        const ganttMonthYear = new GanttChart('gantt-month-year', {
            title: 'Month & Year Views Only',
            defaultPeriod: 'month',
            availableViews: ['month', 'year']
        });
        ganttMonthYear.setTasks(sampleTasks);

        // Test 4: Only day view
        const ganttDayOnly = new GanttChart('gantt-day-only', {
            title: 'Day View Only',
            defaultPeriod: 'day',
            availableViews: ['day']
        });
        ganttDayOnly.setTasks(sampleTasks);

        // Log available views for each instance
        console.log('All Views Gantt - Available Views:', ganttAllViews.getAvailableViews());
        console.log('Day/Week Gantt - Available Views:', ganttDayWeek.getAvailableViews());
        console.log('Month/Year Gantt - Available Views:', ganttMonthYear.getAvailableViews());
        console.log('Day Only Gantt - Available Views:', ganttDayOnly.getAvailableViews());
    </script>
</body>
</html>
